<script>
    let ScriptLoader = {
        scripts : {
            "https://raw.githubusercontent.com/alexei/sprintf.js/master/dist/sprintf.min.js" : {
                import : ["sprintf"],
            },
        },
        load : function () {
            window.addEventListener("ScriptLoaded", () => {
                if (ScriptLoader.areAllScriptsLoaded()) {
                    window.dispatchEvent(new CustomEvent("AllScriptsLoaded"));
                }
            });
            for (let scriptURL in ScriptLoader.scripts) {
                let config = ScriptLoader.scripts[scriptURL];
                if (config.loaded != true) {
                    fetch(scriptURL, {cache: "no-cache"})
                        .then((response) => response.text())
                        .then((text) => {
                            eval(text);
                            config.loaded = true;
                            config.import.forEach(item => {
                                window[item] = eval(item);
                            });
                            window.dispatchEvent(new CustomEvent("ScriptLoaded", {detail: {src: scriptURL}}));
                        });
                }
            }
        },
        areAllScriptsLoaded : function () {
            return Object.values(ScriptLoader.scripts).every(config => config.loaded);
        },
    };
    ScriptLoader.load();
</script>